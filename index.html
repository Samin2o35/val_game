<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine Story</title>
<style>

body{
  margin:0;
  font-family:Arial, sans-serif;
  background: radial-gradient(circle at top, #1a1a3d, #000014);
  color:rgb(255, 167, 167);
  text-align:center;
  overflow:hidden;
}

/* OWL */
.owl{
  position:absolute;
  top:20px;
  left:50%;
  transform:translateX(-50%);
  font-size:70px;
  transition:0.3s;
}

/* BLINK */
@keyframes blink{
  0%, 95%, 100%{transform:scaleY(1);}
  97%{transform:scaleY(0.1);}
}
.blink{
  animation:blink 4s infinite;
}

/* PANIC */
@keyframes panic{
  0%{transform:translateX(-50%) translateX(-10px);}
  25%{transform:translateX(-50%) translateX(10px);}
  50%{transform:translateX(-50%) translateX(-10px);}
  75%{transform:translateX(-50%) translateX(10px);}
  100%{transform:translateX(-50%);}
}
.panic{
  animation:panic 0.6s;
}

/* CHARACTERS */
.character{
  position:absolute;
  bottom:120px;
  width:120px;
  height:180px;
}

.boy{ left:10%; }
.girl{ right:10%; }

.head{
  width:100px;
  height:100px;
  border-radius:50%;
  background:#ffe0bd;
  margin:auto;
}

.body{
  width:70px;
  height:80px;
  background:#5c8df6;
  margin:auto;
  border-radius:20px;
}

/* GIRL COLOR */
.girl .body{
  background:#ff7aa2;
}

/* DIALOGUE */
#dialogue{
  position:absolute;
  bottom:60px;
  width:100%;
  font-size:18px;
  padding:10px;
  min-height:60px;
}

/* OPTIONS */
.options{
  position:absolute;
  bottom:10px;
  width:100%;
}

button{
  padding:10px 20px;
  margin:5px;
  font-size:16px;
  border:none;
  border-radius:20px;
}

/* CONFETTI */
@keyframes confetti{
  0%{transform:translateY(-10px);}
  100%{transform:translateY(600px);}
}
.confetti{
  position:absolute;
  width:10px;
  height:10px;
  background:yellow;
  animation:confetti 2s linear forwards;
}

</style>
</head>
<body>

<div id="owl" class="owl blink">(-_-)</div>

<div class="character boy">
  <div class="head"></div>
  <div class="body"></div>
</div>

<div class="character girl">
  <div class="head"></div>
  <div class="body"></div>
</div>

<div id="dialogue"></div>
<div class="options" id="options"></div>

<script>

const owl = document.getElementById("owl");
const dialogue = document.getElementById("dialogue");
const options = document.getElementById("options");

let step = 0;

function lookLeft(){ owl.style.transform="translateX(-50%) rotate(-10deg)"; }
function lookRight(){ owl.style.transform="translateX(-50%) rotate(10deg)"; }
function center(){ owl.style.transform="translateX(-50%)"; }

function setOwl(face){
  owl.classList.remove("panic");
  owl.innerText = face;
}

function next(){
  step++;
  options.innerHTML="";
  runStory();
}

function runStory(){

switch(step){

case 0:
  setOwl("(-_-)"); // asleep
  setTimeout(()=>{
    setOwl("(â€¢_â€¢)");
    next();
  },1500);
break;

case 1:
  lookRight();
  dialogue.innerText="Girl: Thank you for spending so much time with me.";
break;

case 2:
  lookLeft();
  dialogue.innerText="Boy: You're welcome but it was mostly because I was curious how I felt about you.";
  setOwl("(â€¢.â€¢)"); // curious
break;

case 3:
  lookRight();
  dialogue.innerText="Girl: Oh, and what did you find out from being so curious?";
break;

case 4:
  lookLeft();
  dialogue.innerText="Boy: I found out that I had a big crush on you in 10th grade.";
  setOwl("(O_O)");
break;

case 5:
  dialogue.innerText="Boy: and the current version I'm head over heels for.";
  setOwl("(O_O)");
  owl.classList.add("panic");
break;

case 6:
  lookRight();
  dialogue.innerText="Girl: Hmmm... Do I feel the same way?";
break;

case 7:
  dialogue.innerText="Choose:";
  options.innerHTML=`
    <button onclick="girlChoice('yes')">Yes</button>
    <button onclick="girlChoice('no')">No</button>
    <button onclick="girlChoice('maybe')">Maybe</button>
  `;
break;

case 8:
  lookLeft();
  dialogue.innerText="Boy: So...";
  setOwl("(â€¢_â€¢)");
break;

case 9:
  dialogue.innerText="Boy: Will you be my valentine?";
  setOwl("(>_<)");
  options.innerHTML=`
    <button onclick="finalYes()">Yes</button>
    <button id="noBtn">No</button>
  `;
  
  // Make NO impossible (long press 2 seconds)
  const noBtn = document.getElementById("noBtn");
  let pressTimer;
  noBtn.addEventListener("touchstart",()=>{
    pressTimer = setTimeout(()=>{
      alert("It seems destiny disagrees ðŸ’•");
    },2000);
  });
  noBtn.addEventListener("touchend",()=>{
    clearTimeout(pressTimer);
  });

break;
}
}

function girlChoice(choice){
  if(choice==="yes"){
    setOwl("(>///<)");
    next();
  }
  if(choice==="no"){
    setOwl("(;_;)");
  }
  if(choice==="maybe"){
    setOwl("(-_-)");
  }
}

function finalYes(){
  setOwl("^_^");
  dialogue.innerText="Yay!";
  options.innerHTML="";
  for(let i=0;i<40;i++){
    let c=document.createElement("div");
    c.className="confetti";
    c.style.left=Math.random()*100+"%";
    c.style.background=`hsl(${Math.random()*360},100%,50%)`;
    document.body.appendChild(c);
  }
}

document.body.addEventListener("click", next);

runStory();

</script>

</body>
</html>
